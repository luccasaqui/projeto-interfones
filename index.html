<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GERADOR DE DADOS DO INTERFONE INTELIGENTE</title>
    <!-- Inclui o Tailwind CSS para um design limpo e responsivo -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    <!-- Ícones (Feather Icons) -->
    <script src="https://unpkg.com/feather-icons"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f2f5; /* Cor de fundo suave */
        }
        /* Para manter a formatação do texto com quebras de linha */
        pre {
            white-space: pre-wrap;
            word-wrap: break-word;
            font-family: inherit; /* Herda a fonte do corpo */
        }
        /* Adiciona o cursor de ponteiro ao título para indicar que é clicável */
        #headerTitle:hover {
            cursor: pointer;
            opacity: 0.8;
        }
    </style>
</head>
<body class="flex items-center justify-center min-h-screen p-4">
    <div class="bg-white p-8 rounded-2xl shadow-lg border border-gray-200 w-full max-w-md mx-auto">
        <h1 id="headerTitle" class="text-3xl font-bold text-center text-gray-800 mb-6 transition-opacity">GERADOR DE DADOS DO INTERFONE INTELIGENTE</h1>
        
        <!-- Formulário de Entrada -->
        <div class="space-y-4">
            <div>
                <label for="condominio" class="block text-sm font-medium text-gray-700">Condomínio</label>
                <select id="condominio" class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                    <option value="">Selecione um condomínio...</option>
                    <!-- Opções de condomínios serão populadas via JS -->
                </select>
            </div>
            <div>
                <label for="bloco" class="block text-sm font-medium text-gray-700">Bloco</label>
                <input type="text" id="bloco" class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm" placeholder="Ex: 01">
            </div>
            <div>
                <label for="apartamento" class="block text-sm font-medium text-gray-700">Apartamento</label>
                <input type="text" id="apartamento" class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm" placeholder="Ex: 101">
            </div>
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">Ponto</label>
                <div class="flex space-x-4">
                    <label class="inline-flex items-center">
                        <input type="radio" name="ponto" value="1" class="form-radio text-blue-600" checked>
                        <span class="ml-2 text-gray-700">Primeiro Ponto</span>
                    </label>
                    <label class="inline-flex items-center">
                        <input type="radio" name="ponto" value="2" class="form-radio text-blue-600">
                        <span class="ml-2 text-gray-700">Segundo Ponto</span>
                    </label>
                </div>
            </div>
            <button id="gerarDadosBtn" class="w-full bg-blue-600 text-white py-2 px-4 rounded-md shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200">
                GERAR DADOS
            </button>
        </div>
        
        <!-- Seção de Mensagens temporárias -->
        <div id="messageBox" class="mt-4 p-3 rounded-md text-sm text-center hidden"></div>
        
        <!-- Seção de Alerta Específico (Amarelo, Persistente) -->
        <div id="warningBox" class="mt-4 p-3 rounded-md text-sm text-center bg-yellow-100 text-yellow-800 border border-yellow-200 hidden">
            <i data-feather="alert-triangle" class="inline-block h-4 w-4 mr-2 align-text-bottom"></i>
            <span id="warningText" class="font-medium"></span>
        </div>

        <!-- Campos de Saída -->
        <div id="outputSection" class="mt-6 space-y-4 hidden">
            <hr/>
            <h2 class="text-xl font-bold text-center text-gray-800 pt-2">Dados Gerados</h2>
            <!-- Usuário -->
            <div>
                <label class="block text-sm font-medium text-gray-700">USUÁRIO</label>
                <div class="relative mt-1">
                    <input type="text" id="usuarioOutput" readonly class="w-full px-3 py-2 pr-10 bg-gray-100 border border-gray-300 rounded-md shadow-sm text-gray-900 focus:outline-none sm:text-sm">
                    <button class="copy-btn absolute inset-y-0 right-0 flex items-center pr-3 text-gray-500 hover:text-gray-800 transition-colors duration-200" data-target="usuarioOutput" aria-label="Copiar usuário">
                        <i data-feather="copy" class="w-5 h-5"></i>
                    </button>
                </div>
            </div>
            <!-- Senha -->
            <div>
                <label class="block text-sm font-medium text-gray-700">SENHA</label>
                <div class="relative mt-1">
                    <input type="text" id="senhaOutput" readonly class="w-full px-3 py-2 pr-10 bg-gray-100 border border-gray-300 rounded-md shadow-sm text-gray-900 focus:outline-none sm:text-sm">
                    <button class="copy-btn absolute inset-y-0 right-0 flex items-center pr-3 text-gray-500 hover:text-gray-800 transition-colors duration-200" data-target="senhaOutput" aria-label="Copiar senha">
                        <i data-feather="copy" class="w-5 h-5"></i>
                    </button>
                </div>
            </div>
            <!-- Domínio -->
            <div>
                <label class="block text-sm font-medium text-gray-700">DOMÍNIO</label>
                <div class="relative mt-1">
                    <input type="text" id="dominioOutput" readonly class="w-full px-3 py-2 pr-10 bg-gray-100 border border-gray-300 rounded-md shadow-sm text-gray-900 focus:outline-none sm:text-sm">
                    <button class="copy-btn absolute inset-y-0 right-0 flex items-center pr-3 text-gray-500 hover:text-gray-800 transition-colors duration-200" data-target="dominioOutput" aria-label="Copiar domínio">
                        <i data-feather="copy" class="w-5 h-5"></i>
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Seção do Atalho PABX -->
        <div id="pabxSection" class="hidden pt-4">
            <label class="block text-sm font-medium text-gray-700">ATALHO PABX</label>
            <a id="pabxLink" href="#" target="_blank" class="w-full mt-1 flex items-center justify-center bg-gray-600 text-white py-2 px-4 rounded-md shadow-sm hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 transition-colors duration-200">
                <i data-feather="external-link" class="mr-2 h-4 w-4"></i>
                Acessar o PABX do condomínio
            </a>
        </div>
        
        <!-- SEÇÃO DE INSTRUÇÕES COMPLETAS -->
        <div id="instructionsSection" class="mt-6 hidden">
            <div class="relative bg-gray-50 p-5 rounded-lg border border-gray-200">
                <button id="copyInstructionsBtn" class="absolute top-3 right-3 flex items-center text-gray-500 hover:text-blue-600 transition-colors duration-200" aria-label="Copiar instruções">
                    <i data-feather="copy" class="w-4 h-4"></i>
                    <span class="ml-1 text-xs font-medium">Copiar</span>
                </button>
                <pre id="instructionsOutput" class="text-sm text-gray-800"></pre>
            </div>
        </div>
    </div>
    <script>
    // ==============================================================================
    // CONFIGURAÇÃO UNIFICADA DE CONDOMÍNIOS
    // Lógicas de Senha (password_logic):
    // - "standard":     prefixo + bloco + apartamento + ponto
    // - "fixed":        apenas o prefixo
    // ==============================================================================
    const CONDOMINIOS_CONFIG = {
        // NOME DO CONDOMÍNIO         { pabx: "IP DO PABX", domain: "DOMÍNIO", password_prefix: "PREFIXO DA SENHA", password_logic: "LOGICA" }
        // NOVOS CONDOMÍNIOS ADICIONADOS/ATUALIZADOS
        "AQUARELA CITY":            { pabx: "https://172.17.74.3/",   domain: "aquarelacity.mg.loomy.srv.br",           password_prefix: "rmt@aquarelacity",    password_logic: "standard"      },
        "BOSQUE DO INDAIA":         { pabx: "https://172.17.82.3/",   domain: "bosquedoindaia.loomy.srv.br",            password_prefix: "rmt@bosquedoindaia",  password_logic: "standard"      },
        "FONTE ROYAL":              { pabx: "https://172.17.79.3/",   domain: "fonteroyal.ba.loomy.srv.br",             password_prefix: "rmt@fonteroyal",      password_logic: "standard"      },
        "GRAN PLAZA":               { pabx: "https://172.17.80.3/",   domain: "granplaza.mg.loomy.srv.br",              password_prefix: "rmt@granplaza",       password_logic: "standard"      },
        "PORTO MARANATA":           { pabx: "https://172.17.81.3/",   domain: "portomaranata.go.loomy.srv.br",          password_prefix: "rmt@portomaranata",   password_logic: "standard"      },
        "TERRA NOVA":               { pabx: "https://172.17.83.3/",   domain: "terranova.loomy.srv.br",                 password_prefix: "rmt@terranova2025",   password_logic: "fixed"         },
        
        // CONDOMÍNIOS EXISTENTES (REVISADOS/CORRIGIDOS)
        "BENDORF":                  { pabx: "https://192.168.18.3",   domain: "bendorf.sc.loomy.srv.br",                password_prefix: "rmt@bendorf",         password_logic: "standard"      },
        "BOSQUE DA RIBEIRA":        { pabx: "https://172.17.59.3",    domain: "bosquedaribeira.mg.loomy.srv.br",        password_prefix: "rmt@ribeira",         password_logic: "standard"      },
        "BOSQUE DAS ÁGUAS":         { pabx: "https://172.17.62.3",    domain: "bosquedasaguas.mg.loomy.srv.br",         password_prefix: "rmt@bosqueaguas",     password_logic: "standard"      },
        "BOSQUE DAS MARGARIDAS":    { pabx: "https://172.17.11.3",    domain: "margaridas.mg.loomy.srv.br",             password_prefix: "rmt@loomy123#",       password_logic: "fixed"         },
        "BRISAS DA SERRA 1 [1-4]":  { pabx: "https://172.17.52.5",    domain: "brisasdaserra1.mg.loomy.srv.br",         password_prefix: "rmt@brisas",          password_logic: "standard"      },
        "BRISAS DA SERRA 2 [5-27]": { pabx: "https://172.17.52.3",    domain: "brisasdaserra2.mg.loomy.srv.br",         password_prefix: "rmt@brisas02#",       password_logic: "standard"      },
        "CANTO DO SABIÁ":           { pabx: "https://172.17.60.3",    domain: "cantodosabia.mg.loomy.srv.br",           password_prefix: "rmt@cantodosabia",    password_logic: "standard"      },
        "CASA BRANCA":              { pabx: "https://172.17.73.3/",   domain: "casabranca.ba.loomy.srv.br",             password_prefix: "rmt@casabranca",      password_logic: "standard"      },
        "CHAPADA DOS LÍRIOS":       { pabx: "https://172.17.40.3",    domain: "chapadadoslirios.mt.loomy.srv.br",       password_prefix: "rmt@lirios",          password_logic: "standard"      },
        "CHAPADA PANTANAL":         { pabx: "https://172.17.39.3",    domain: "chapadapantanal.mt.loomy.srv.br",        password_prefix: "rmt@loomy#",          password_logic: "standard"      },
        "COSTA DO CACAU":           { pabx: "https://172.17.13.3",    domain: "costadocacau.ba.loomy.srv.br",           password_prefix: "rmt@loomy123#",       password_logic: "fixed"         },
        "ECOVILAGGIO":              { pabx: "https://172.17.38.3",    domain: "ecovillagio.go.loomy.srv.br",            password_prefix: "rmt@ecovilla",        password_logic: "standard"      },
        "ESTRELA DE CRISTAL":       { pabx: "https://172.17.66.3",    domain: "estreladecristal.loomy.srv.br",          password_prefix: "rmt@cristal#",        password_logic: "standard"      },
        "FONTANA":                  { pabx: "https://172.17.7.3/",    domain: "fontana.mg.loomy.srv.br",                password_prefix: "rmt@biasca",          password_logic: "standard"      },
        "GOLDEN PLAZA":             { pabx: "https://172.17.35.3",    domain: "goldenplaza.sp.loomy.srv.br",            password_prefix: "rmt@golden",          password_logic: "standard"      },
        "GRANCLUB":                 { pabx: "https://192.168.12.3",   domain: "granclub.go.loomy.srv.br",               password_prefix: "rmt@loomy123#",       password_logic: "fixed"         },
        "GRAN SONATA":              { pabx: "https://172.17.55.3",    domain: "gransonata.go.loomy.srv.br",             password_prefix: "rmt@gransonata",      password_logic: "standard"      },
        "GRAN VALEY":               { pabx: "https://172.17.26.3",    domain: "granvalley.go.loomy.srv.br",             password_prefix: "rmt@loomy123#",       password_logic: "fixed"         },
        "GREENVILLE":               { pabx: "https://172.17.68.3",    domain: "greenville.mg.loomy.srv.br",             password_prefix: "greenville@rmt",      password_logic: "standard"      },
        "JARDIM TIRADENTES":        { pabx: "https://172.17.19.3",    domain: "tiradentes.mg.loomy.srv.br",             password_prefix: "rmt@loomy2023",       password_logic: "fixed"         },
        "JOINVILLE":                { pabx: "https://192.168.17.3",   domain: "joinville.sp.loomy.srv.br",              password_prefix: "rmt@loomy123#",       password_logic: "fixed"         },
        "LAGOA DAS ESMERALDAS":     { pabx: "https://172.17.25.3",    domain: "lagoadasesmeraldas.mg.loomy.srv.br",     password_prefix: "rmt@loomy2023#",      password_logic: "fixed"         },
        "LAGUNA":                   { pabx: "https://172.17.70.3",    domain: "laguna.ba.loomy.srv.br",                 password_prefix: "rmt@laguna",          password_logic: "standard"      },
        "LIBRA":                    { pabx: "https://172.17.32.3",    domain: "libra.mg.loomy.srv.br",                  password_prefix: "rmt@loomy#2023",      password_logic: "fixed"         },
        "LISBOA":                   { pabx: "https://172.17.22.3",    domain: "provinciaslisboa.mg.loomy.srv.br",       password_prefix: "rmt@loomy",           password_logic: "standard"      },
        "LUZ DO CAMPO":             { pabx: "https://172.17.44.3",    domain: "luzdocampo.sp.loomy.srv.br",             password_prefix: "rmt@luzdocampo",      password_logic: "standard"      },
        "MAIS PARK":                { pabx: "https://172.17.53.3",    domain: "maispark.mg.loomy.srv.br",               password_prefix: "rmt@maispark",        password_logic: "standard"      },
        "MARAJÓ":                   { pabx: "https://172.17.29.3",    domain: "marajo.mg.loomy.srv.br",                 password_prefix: "rmt@loomy123#",       password_logic: "fixed"         },
        "MATA ATLÂNTICA":           { pabx: "https://172.17.12.3",    domain: "mataatlantica.mg.loomy.srv.br",          password_prefix: "rmt@loomy123#",       password_logic: "fixed"         },
        "MILIONÁRIOS":              { pabx: "https://172.17.77.3/",   domain: "residencialmilionarios.mg.loomy.srv.br", password_prefix: "rmt@residencialmilionarios", password_logic: "standard" },
        "MORADA CARIOCA":           { pabx: "https://172.17.23.3",    domain: "moradacarioca.sp.loomy.srv.br",          password_prefix: "rmt@loomy#123",       password_logic: "fixed"         },
        "MORADA DAS TORRES - CLUB": { pabx: "https://172.17.51.3",    domain: "moradadastorres.ba.loomy.srv.br",        password_prefix: "rmt@moradaclub",      password_logic: "standard"      },
        "MORADA DAS TORRES SP":     { pabx: "https://192.168.20.3",   domain: "moradadastorres.sp.loomy.srv.br",        password_prefix: "rmt@loomy123#",       password_logic: "fixed"         },
        "MORADA DE MINAS":          { pabx: "https://172.17.48.3",    domain: "moradademinas.mg.loomy.srv.br",          password_prefix: "rmt@mdeminas",        password_logic: "standard"      },
        "MORADA PREMIUM":           { pabx: "https://172.17.71.3/",   domain: "moradapremium.ba.loomy.srv.br",          password_prefix: "rmt@moradapremium",   password_logic: "standard"      },
        "MUSIQUE":                  { pabx: "https://172.17.15.3",    domain: "musique.mg.loomy.srv.br",                password_prefix: "rmt@loomy123#",       password_logic: "fixed"         },
        "PARQUE DAS NAÇÕES":        { pabx: "https://172.17.72.3/",   domain: "parquedasnacoes.ba.loomy.srv.br",        password_prefix: "rmt@parquedasnacoes", password_logic: "standard"      },
        "PLAZA NORTE":              { pabx: "https://172.17.18.3",    domain: "plazanorte.mg.loomy.srv.br",             password_prefix: "rmt@loomy#",          password_logic: "standard"      },
        "PONTO DIAMANTE":           { pabx: "https://172.17.58.3",    domain: "pontodiamante.mg.loomy.srv.br",          password_prefix: "rmt@pontod",          password_logic: "standard"      },
        "PONTO GARDÊNIA":           { pabx: "https://172.17.31.3",    domain: "gardenia.mg.loomy.srv.br",               password_prefix: "rmt@loomy2023",       password_logic: "fixed"         },
        "PONTO VEREDAS":            { pabx: "https://172.17.61.3",    domain: "pontoveredas.mg.loomy.srv.br",           password_prefix: "rmt@pontoveredas",    password_logic: "standard"      },
        "PORTO DOURADO 2":          { pabx: "https://172.17.46.3/",   domain: "portodourado2.go.loomy.srv.br",          password_prefix: "rmt@portodourado",    password_logic: "standard"      },
        "PORTO DOURADO 3":          { pabx: "https://172.17.17.3/",   domain: "portodourado3.go.loomy.srv.br",          password_prefix: "rmt@portodourado3",   password_logic: "standard"      },
        "RECANTO DOS ABRANTES":     { pabx: "https://187.44.177.206:8443", domain: "recantodosabrantes.ba.loomy.srv.br", password_prefix: "rmt@abrantes",      password_logic: "standard"      },
        "RESERVA BARRA FUNDA":      { pabx: "https://172.17.43.3",    domain: "reservabarrafunda.sp.loomy.srv.br",      password_prefix: "rmt@reservabarrafunda", password_logic: "standard"      },
        "RESIDENCIAL SABIÁ":        { pabx: "https://172.17.34.3",    domain: "residencialsabia.mg.loomy.srv.br",       password_prefix: "rmt@loomy#2023",      password_logic: "fixed"         },
        "RIVERA LIFE":              { pabx: "https://172.17.54.3",    domain: "riveralife.ba.loomy.srv.br",             password_prefix: "rmt@rivera",          password_logic: "standard"      },
        "RUBIS":                    { pabx: "https://172.17.10.3",    domain: "rubis.mg.loomy.srv.br",                  password_prefix: "rmt@loomy123#",       password_logic: "fixed"         },
        "SAN FELIPPO":              { pabx: "https://172.17.30.3",    domain: "sanfelippo.sp.loomy.srv.br",             password_prefix: "rmt@loomy2023#",      password_logic: "fixed"         },
        "SÃO FRANCISCO":            { pabx: "https://172.17.37.3",    domain: "saofrancisco.mg.loomy.srv.br",           password_prefix: "rmt@loomy2023#",      password_logic: "fixed"         },
        "SERRA DOS PINHAIS":        { pabx: "https://172.17.20.3",    domain: "serradospinhais.mg.loomy.srv.br",        password_prefix: "Loomy@",              password_logic: "standard"      },
        "SOLAR DA COLINA":          { pabx: "https://192.168.13.3",   domain: null,                                     password_prefix: "rmt@solardacolina",   password_logic: "standard"      },
        "SOLAR DO VALE":            { pabx: "https://192.168.10.3",   domain: null,                                     password_prefix: "rmt@loomy#2023",      password_logic: "fixed"         },
        "SOLAR DOS MONTES":         { pabx: "https://172.17.33.3",    domain: "solardosmontes.mg.loomy.srv.br",         password_prefix: "rmt@loomy#2023",      password_logic: "fixed"         },
        "SOL DO ENGENHO":           { pabx: "https://172.17.27.3",    domain: "soldoengenho.rj.loomy.srv.br",           password_prefix: "rmt@engenho",         password_logic: "standard"      },
        "SPAZIO SALVADOR NORTE":    { pabx: "https://172.17.50.3",    domain: "spaziosalvadornorte.ba.loomy.srv.br",    password_prefix: "rmt@spaziosalvador",  password_logic: "standard"      },
        "SPAZIO SINGULAR":          { pabx: "https://172.17.14.3",    domain: "spaziosingular.ba.loomy.srv.br",         password_prefix: "rmt@loomy123#",       password_logic: "fixed"         },
        "VIC PARK MONTREAL":        { pabx: "https://172.17.47.3",    domain: "vicpark.mg.loomy.srv.br",                password_prefix: "rmt@vic",             password_logic: "standard"      },
        "VILA DIAMANTE":            { pabx: "https://172.17.16.3",    domain: "viladiamante.es.loomy.srv.br",           password_prefix: "rmt@loomy#26!",       password_logic: "fixed"         },
        "VILA REAL ESMERALDA":      { pabx: "https://172.17.56.3",    domain: "vilarealesmeralda.mg.loomy.srv.br",      password_prefix: "rmt@vilareal",        password_logic: "standard"      },
        "VILLAGE EUROPA":           { pabx: "https://172.17.8.3/",    domain: "villageeuropa.mg.loomy.srv.br",          password_prefix: "rmt@villageeuropa",   password_logic: "standard"      },
        "VILLAGE TORINO":           { pabx: "https://172.17.75.3/",   domain: "villagertorino.mg.loomy.srv.br",         password_prefix: "rmt@villagetorino",   password_logic: "standard"      },
        "VILLAS VILLAGE":           { pabx: "https://172.17.21.3",    domain: "villasvillage.ba.loomy.srv.br",          password_prefix: "rmt@villasvillage",   password_logic: "standard"      },
        "VIVER FAMA":               { pabx: "https://172.17.64.3",    domain: "viverfama.go.loomy.srv.br",              password_prefix: "rmt@viverfama",       password_logic: "standard"      },
        "XINGÚ":                    { pabx: "https://172.17.57.3",    domain: "residencialxingu.mg.loomy.srv.br",       password_prefix: "rmt@xingu",           password_logic: "standard"      },
    };
    
    // --- LÓGICA PRINCIPAL DA APLICAÇÃO ---
    window.addEventListener('DOMContentLoaded', () => {
        populateCondoSelect();
        feather.replace();
        addEventListeners();
    });
    
    function addEventListeners() {
        document.getElementById('gerarDadosBtn').addEventListener('click', generateData);
        document.getElementById('headerTitle').addEventListener('click', resetUI);
    
        document.querySelectorAll('.copy-btn').forEach(button => {
            button.addEventListener('click', (event) => {
                const targetId = event.currentTarget.dataset.target;
                const targetInput = document.getElementById(targetId);
                copyToClipboard(targetInput.value, `${targetInput.previousElementSibling.textContent.replace(':', '')} copiado!`);
            });
        });
    
        document.getElementById('copyInstructionsBtn').addEventListener('click', () => {
            const instructionsText = document.getElementById('instructionsOutput').textContent;
            copyToClipboard(instructionsText, 'Instruções copiadas para a área de transferência!');
        });
    }
    
    function populateCondoSelect() {
        const select = document.getElementById('condominio');
        const condoNames = Object.keys(CONDOMINIOS_CONFIG).sort();
        condoNames.forEach(name => {
            const option = document.createElement('option');
            option.value = name;
            option.textContent = name;
            select.appendChild(option);
        });
    }
    
    function resetUI() {
        document.getElementById('condominio').value = '';
        document.getElementById('bloco').value = '';
        document.getElementById('apartamento').value = '';
        document.querySelector('input[name="ponto"][value="1"]').checked = true;
    
        document.getElementById('outputSection').classList.add('hidden');
        document.getElementById('instructionsSection').classList.add('hidden');
        document.getElementById('pabxSection').classList.add('hidden');
        document.getElementById('messageBox').classList.add('hidden');
        document.getElementById('warningBox').classList.add('hidden');
    }
    
    function showMessage(message, type = 'success') {
        const messageBox = document.getElementById('messageBox');
        messageBox.textContent = message;
        messageBox.className = 'mt-4 p-3 rounded-md text-sm text-center'; // Reset class
        if (type === 'success') {
            messageBox.classList.add('bg-green-100', 'text-green-800', 'border', 'border-green-200');
        } else {
            messageBox.classList.add('bg-red-100', 'text-red-800', 'border', 'border-red-200');
        }
        messageBox.classList.remove('hidden');
        setTimeout(() => messageBox.classList.add('hidden'), 3000);
    }
    
    function showWarningMessage(message) {
        const warningBox = document.getElementById('warningBox');
        document.getElementById('warningText').textContent = message;
        warningBox.classList.remove('hidden');
    }
    
    function copyToClipboard(text, successMessage) {
        const textArea = document.createElement("textarea");
        textArea.value = text;
        textArea.style.position = "fixed";
        textArea.style.top = "0";
        textArea.style.left = "0";
        textArea.style.opacity = "0";
        document.body.appendChild(textArea);
        textArea.focus();
        textArea.select();
        try {
            const successful = document.execCommand('copy');
            if (successful) {
                showMessage(successMessage, 'success');
            } else {
                throw new Error('Copy command was not successful');
            }
        } catch (err) {
            console.error('Falha ao copiar: ', err);
            showMessage("Falha ao copiar. Tente manualmente.", 'error');
        }
        document.body.removeChild(textArea);
    }
    
    function generateData() {
        const bloco = document.getElementById('bloco').value.trim();
        const apartamento = document.getElementById('apartamento').value.trim();
        const condominioName = document.getElementById('condominio').value;
        const ponto = document.querySelector('input[name="ponto"]:checked').value;
    
        // Esconde seções de saída e alerta
        document.getElementById('outputSection').classList.add('hidden');
        document.getElementById('instructionsSection').classList.add('hidden');
        document.getElementById('pabxSection').classList.add('hidden');
        document.getElementById('warningBox').classList.add('hidden');
        document.getElementById('messageBox').classList.add('hidden');
    
        if (!condominioName || !bloco || !apartamento) {
            showMessage("Por favor, preencha todos os campos.", 'error');
            return;
        }
    
        const config = CONDOMINIOS_CONFIG[condominioName];
        if (!config) {
            showMessage("Configuração do condomínio não encontrada.", 'error');
            return;
        }
    
        let senha;
        const { password_prefix, password_logic } = config;
    
        // Lógica de Senha
        switch (password_logic) {
            case 'fixed':
                senha = password_prefix;
                break;
            case 'standard':
            default:
                // standard: prefixo + bloco + apartamento + ponto
                senha = `${password_prefix}${bloco}${apartamento}${ponto}`;
                break;
        }
    
        // Geração do USUÁRIO (Ramal) - NÃO HÁ DUPLICAÇÃO.
        const usuario = `${bloco}${apartamento}${ponto}`;
        const dominio = config.domain || "Não disponível";
    
        // Geração dos Dados
        document.getElementById('usuarioOutput').value = usuario;
        document.getElementById('senhaOutput').value = senha;
        document.getElementById('dominioOutput').value = dominio;
        document.getElementById('outputSection').classList.remove('hidden');
    
        // Exibição do PABX
        const pabxSection = document.getElementById('pabxSection');
        const pabxLink = document.getElementById('pabxLink');
        if (config.pabx && config.pabx !== 'null') {
            pabxLink.href = config.pabx;
            pabxSection.classList.remove('hidden');
        }
    
        // Alertas Especiais (MANDATÓRIO)
        if (condominioName === "CANTO DO SABIÁ") {
            showWarningMessage("VALIDAR O LADO DO BLOCO (A OU B)");
        } else if (condominioName === "RESERVA BARRA FUNDA" || condominioName === "FONTE ROYAL" || condominioName === "BOSQUE DO INDAIA") {
            showWarningMessage("OS RAMAIS DO INTERFONE INTELIGENTE TERMINAM COM 01/02");
        }
        
        // Geração das Instruções Completas
        const interfoneFisico = `${bloco}${apartamento}`;
        const instructionsText = `USUÁRIO: ${usuario}\nSENHA: ${senha}\nDOMÍNIO: ${dominio}\n\nSIGA O PASSO A PASSO DO VÍDEO COM ATENÇÃO! ⚠\nhttps://www.youtube.com/watch?v=lZxGqBq7S5U\n\nBaixe o aplicativo.\n\nLINK INTERFONE INTELIGENTE - ANDROID:\nhttps://play.google.com/store/apps/details?id=com.voipgroup.loomyinterfone&hl=pt_BR\n\nLINK INTERFONE INTELIGENTE - IPHONE:\nhttps://apps.apple.com/br/app/loomy-interfone-inteligente/id1633125172\n\nComo usar?\nPara ligar para a portaria, digite: 94\nPara ligar para o seu interfone físico, digite: ${interfoneFisico}\nPara ligar no seu interfone inteligente, digite: ${usuario}`;
    
        document.getElementById('instructionsOutput').textContent = instructionsText;
        document.getElementById('instructionsSection').classList.remove('hidden');
        feather.replace(); // Recarrega os ícones após manipulação do DOM
    }
    </script>
</body>
</html>
