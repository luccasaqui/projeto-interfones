<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GERADOR DE DADOS DO INTERFONE INTELIGENTE</title>
    <!-- Inclui o Tailwind CSS para um design limpo e responsivo -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    <!-- Ícones (Feather Icons) -->
    <script src="https://unpkg.com/feather-icons"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f2f5; /* Cor de fundo suave */
        }
        /* Para manter a formatação do texto com quebras de linha */
        pre {
            white-space: pre-wrap;
            word-wrap: break-word;
            font-family: inherit; /* Herda a fonte do corpo */
        }
    </style>
</head>
<body class="flex items-center justify-center min-h-screen p-4">

    <div class="bg-white p-8 rounded-2xl shadow-lg border border-gray-200 w-full max-w-md mx-auto">
        <h1 class="text-3xl font-bold text-center text-gray-800 mb-6">GERADOR DE DADOS DO INTERFONE INTELIGENTE</h1>

        <!-- Formulário de Entrada -->
        <div class="space-y-4">
            <div>
                <label for="condominio" class="block text-sm font-medium text-gray-700">Condomínio</label>
                <select id="condominio" class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                    <option value="">Selecione um condomínio...</option>
                    <!-- Opções de condomínios serão populadas via JS -->
                </select>
            </div>
            <div>
                <label for="bloco" class="block text-sm font-medium text-gray-700">Bloco</label>
                <input type="text" id="bloco" class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
            </div>
            <div>
                <label for="apartamento" class="block text-sm font-medium text-gray-700">Apartamento</label>
                <input type="text" id="apartamento" class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
            </div>
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">Ponto</label>
                <div class="flex space-x-4">
                    <label class="inline-flex items-center">
                        <input type="radio" name="ponto" value="1" class="form-radio text-blue-600" checked>
                        <span class="ml-2 text-gray-700">Primeiro Ponto</span>
                    </label>
                    <label class="inline-flex items-center">
                        <input type="radio" name="ponto" value="2" class="form-radio text-blue-600">
                        <span class="ml-2 text-gray-700">Segundo Ponto</span>
                    </label>
                </div>
            </div>
            <button id="gerarDadosBtn" class="w-full bg-blue-600 text-white py-2 px-4 rounded-md shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200">
                GERAR DADOS
            </button>
        </div>
        
        <!-- Seção do Atalho PABX (Agora separada e controlada pelo 'change' do select) -->
        <div id="pabxSection" class="hidden pt-4">
            <label class="block text-sm font-medium text-gray-700">ATALHO PABX</label>
            <a id="pabxLink" href="#" target="_blank" class="w-full mt-1 flex items-center justify-center bg-gray-600 text-white py-2 px-4 rounded-md shadow-sm hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 transition-colors duration-200">
                <i data-feather="external-link" class="mr-2 h-4 w-4"></i>
                Acessar o PABX do Condomínio
            </a>
        </div>

        <!-- Seção de Mensagens -->
        <div id="messageBox" class="mt-4 p-3 rounded-md text-sm text-center hidden"></div>

        <!-- Campos de Saída -->
        <div id="outputSection" class="mt-6 space-y-4 hidden">
            <hr/>
            <h2 class="text-xl font-bold text-center text-gray-800 pt-2">Dados Gerados</h2>
            <!-- Usuário -->
            <div>
                <label class="block text-sm font-medium text-gray-700">USUÁRIO</label>
                <div class="relative mt-1">
                    <input type="text" id="usuarioOutput" readonly class="w-full px-3 py-2 pr-10 bg-gray-100 border border-gray-300 rounded-md shadow-sm text-gray-900 focus:outline-none sm:text-sm">
                    <button class="copy-btn absolute inset-y-0 right-0 flex items-center pr-3 text-gray-500 hover:text-gray-800 transition-colors duration-200" data-target="usuarioOutput" aria-label="Copiar usuário">
                        <i data-feather="copy" class="w-5 h-5"></i>
                    </button>
                </div>
            </div>
            <!-- Senha -->
            <div>
                <label class="block text-sm font-medium text-gray-700">SENHA</label>
                <div class="relative mt-1">
                    <input type="text" id="senhaOutput" readonly class="w-full px-3 py-2 pr-10 bg-gray-100 border border-gray-300 rounded-md shadow-sm text-gray-900 focus:outline-none sm:text-sm">
                    <button class="copy-btn absolute inset-y-0 right-0 flex items-center pr-3 text-gray-500 hover:text-gray-800 transition-colors duration-200" data-target="senhaOutput" aria-label="Copiar senha">
                        <i data-feather="copy" class="w-5 h-5"></i>
                    </button>
                </div>
            </div>
            <!-- Domínio -->
            <div>
                <label class="block text-sm font-medium text-gray-700">DOMÍNIO</label>
                <div class="relative mt-1">
                    <input type="text" id="dominioOutput" readonly class="w-full px-3 py-2 pr-10 bg-gray-100 border border-gray-300 rounded-md shadow-sm text-gray-900 focus:outline-none sm:text-sm">
                    <button class="copy-btn absolute inset-y-0 right-0 flex items-center pr-3 text-gray-500 hover:text-gray-800 transition-colors duration-200" data-target="dominioOutput" aria-label="Copiar domínio">
                        <i data-feather="copy" class="w-5 h-5"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- SEÇÃO DE INSTRUÇÕES COMPLETAS -->
        <div id="instructionsSection" class="mt-6 hidden">
            <div class="relative bg-gray-50 p-5 rounded-lg border border-gray-200">
                <button id="copyInstructionsBtn" class="absolute top-3 right-3 flex items-center text-gray-500 hover:text-blue-600 transition-colors duration-200" aria-label="Copiar instruções">
                    <i data-feather="copy" class="w-4 h-4"></i>
                    <span class="ml-1 text-xs font-medium">Copiar</span>
                </button>
                <pre id="instructionsOutput" class="text-sm text-gray-800"></pre>
            </div>
        </div>

    </div>

    <script>
        // Mapeamento consolidado dos dados dos condomínios
        const condominiumData = {
            "BENDORF": { domain: "bendorf.sc.loomy.srv.br", passwordPrefix: "rmt@bendorf", pabx: "https://192.168.18.3" },
            "BOSQUE DA RIBEIRA": { domain: "bosquedaribeira.mg.loomy.srv.br", passwordPrefix: "rmt@ribeira", pabx: "https://172.17.59.3" },
            "BOSQUE DAS ÁGUAS": { domain: "bosquedasaguas.mg.loomy.srv.br", passwordPrefix: "rmt@bosqueaguas", pabx: "https://172.17.62.3" },
            "BOSQUE DAS MARGARIDAS": { domain: "margaridas.mg.loomy.srv.br", passwordPrefix: "rmt@loomy123#", pabx: "https://172.17.11.3" },
            "BRISAS DA SERRA 1 [1-4]": { domain: "brisasdaserra1.mg.loomy.srv.br", passwordPrefix: "rmt@brisas", pabx: "https://172.17.52.5" },
            "BRISAS DA SERRA 2 [5-27]": { domain: "brisasdaserra2.mg.loomy.srv.br", passwordPrefix: "rmt@brisas02#", pabx: "https://172.17.52.3" },
            "CANTO DO SABIÁ": { domain: "cantodosabia.mg.loomy.srv.br", passwordPrefix: "rmt@cantodosabia", pabx: "https://172.17.60.3" },
            "CASA BRANCA": { domain: "casabranca.mg.loomy.srv.br", passwordPrefix: "rmt@casabranca", pabx: "https://172.17.8.3" },
            "CHAPADA DOS LÍRIOS": { domain: "chapadadoslirios.mt.loomy.srv.br", passwordPrefix: "rmt@lirios", pabx: "https://172.17.40.3" },
            "CHAPADA PANTANAL": { domain: "chapadapantanal.mt.loomy.srv.br", passwordPrefix: "rmt@loomy#", pabx: "https://172.17.39.3" },
            "COSTA DO CACAU": { domain: "costadocacau.ba.loomy.srv.br", passwordPrefix: "rmt@loomy123#", pabx: "https://172.17.13.3" },
            "ECOVILAGGIO": { domain: "ecovillagio.go.loomy.srv.br", passwordPrefix: "rmt@ecovilla", pabx: "https://172.17.38.3" },
            "ESTRELA DE CRISTAL": { domain: "estreladecristal.loomy.srv.br", passwordPrefix: "rmt@cristal#", pabx: "https://172.17.66.3" },
            "FONTANA": { domain: "fontana.mg.loomy.srv.br", passwordPrefix: "rmt@biasca" }, // PABX não fornecido
            "GOLDEN PLAZA": { domain: "goldenplaza.sp.loomy.srv.br", passwordPrefix: "rmt@golden", pabx: "https://172.17.35.3" },
            "GRANCLUB": { domain: "granclub.go.loomy.srv.br", passwordPrefix: "rmt@loomy123#", pabx: "https://192.168.12.3" },
            "GRAN SONATA": { domain: "gransonata.go.loomy.srv.br", passwordPrefix: "rmt@gransonata", pabx: "https://172.17.55.3" },
            "GRAN VALEY": { domain: "granvalley.go.loomy.srv.br", passwordPrefix: "rmt@loomy123#", pabx: "https://172.17.26.3" },
            "GREENVILLE": { domain: "greenville.mg.loomy.srv.br", passwordPrefix: "greenville@rmt", pabx: "https://172.17.68.3" },
            "JARDIM TIRADENTES": { domain: "tiradentes.mg.loomy.srv.br", passwordPrefix: "rmt@loomy2023", pabx: "https://172.17.19.3" },
            "JOINVILLE": { domain: "joinville.sp.loomy.srv.br", passwordPrefix: "rmt@loomy123#", pabx: "https://192.168.17.3" },
            "LAGOA DAS ESMERALDAS": { domain: "lagoadasesmeraldas.mg.loomy.srv.br", passwordPrefix: "rmt@loomy2023#", pabx: "https://172.17.25.3" },
            "LAGUNA": { domain: "laguna.ba.loomy.srv.br", passwordPrefix: "rmt@laguna", pabx: "https://172.17.70.3" },
            "LIBRA": { domain: "libra.mg.loomy.srv.br", passwordPrefix: "rmt@loomy#2023", pabx: "https://172.17.32.3" },
            "LISBOA": { domain: "provinciaslisboa.mg.loomy.srv.br", passwordPrefix: "rmt@loomy", pabx: "https://172.17.22.3" },
            "LUZ DO CAMPO": { domain: "luzdocampo.sp.loomy.srv.br", passwordPrefix: "rmt@luzdocampo", pabx: "https://172.17.44.3" },
            "MAIS PARK": { domain: "maispark.mg.loomy.srv.br", passwordPrefix: "rmt@maispark", pabx: "https://172.17.53.3" },
            "MARAJÓ": { domain: "marajo.mg.loomy.srv.br", passwordPrefix: "rmt@loomy123#", pabx: "https://172.17.29.3" },
            "MATA ATLÂNTICA": { domain: "mataatlantica.mg.loomy.srv.br", passwordPrefix: "rmt@loomy123#", pabx: "https://172.17.12.3" },
            "MORADA CARIOCA": { domain: "moradacarioca.sp.loomy.srv.br", passwordPrefix: "rmt@loomy#123", pabx: "https://172.17.23.3" },
            "MORADA DAS TORRES - CLUB": { domain: "moradadastorres.ba.loomy.srv.br", passwordPrefix: "rmt@moradaclub", pabx: "https://172.17.51.3" },
            "MORADA DAS TORRES SP": { domain: "moradadastorres.sp.loomy.srv.br", passwordPrefix: "rmt@loomy123#", pabx: "https://192.168.20.3" },
            "MORADA DE MINAS": { domain: "moradademinas.mg.loomy.srv.br", passwordPrefix: "rmt@mdeminas", pabx: "https://172.17.48.3" },
            "MORADA PREMIUM": { domain: "moradapremium.ba.loomy.srv.br", passwordPrefix: "rmt@moradapremium", pabx: "https://172.17.71.3/" },
            "MUSIQUE": { domain: "musique.mg.loomy.srv.br", passwordPrefix: "rmt@loomy123#", pabx: "https://172.17.15.3" },
            "PARQUE DAS NAÇÕES": { domain: "parquedasnacoes.ba.loomy.srv.br", passwordPrefix: "rmt@parquedasnacoes", pabx: "https://172.17.72.3/" },
            "PLAZA NORTE": { domain: "plazanorte.mg.loomy.srv.br", passwordPrefix: "rmt@loomy#", pabx: "https://172.17.18.3" },
            "PONTO DIAMANTE": { domain: "pontodiamante.mg.loomy.srv.br", passwordPrefix: "rmt@pontod", pabx: "https://172.17.58.3" },
            "PONTO GARDÊNIA": { domain: "gardenia.mg.loomy.srv.br", passwordPrefix: "rmt@loomy2023", pabx: "https://172.17.31.3" },
            "PONTO VEREDAS": { domain: "pontoveredas.mg.loomy.srv.br", passwordPrefix: "rmt@pontoveredas", pabx: "https://172.17.61.3" },
            "PORTO DOURADO 2": { domain: "portodourado2.go.loomy.srv.br", passwordPrefix: "rmt@portodourado" }, // PABX não fornecido
            "PORTO DOURADO 3": { domain: "portodourado3.go.loomy.srv.br", passwordPrefix: "rmt@portodourado3", pabx: "https://172.17.17.3/" },
            "RECANTO DOS ABRANTES": { domain: "recantodosabrantes.ba.loomy.srv.br", passwordPrefix: "rmt@abrantes", pabx: "https://187.44.177.206:8443" },
            "RESERVA BARRA FUNDA": { domain: "reservabarrafunda.sp.loomy.srv.br", passwordPrefix: "rmt@reservabarrafunda", pabx: "https://172.17.43.3", specialPassword: true },
            "RESIDENCIAL SABIÁ": { domain: "residencialsabia.mg.loomy.srv.br", passwordPrefix: "rmt@loomy#2023", pabx: "https://172.17.34.3" },
            "RIVERA LIFE": { domain: "riveralife.ba.loomy.srv.br", passwordPrefix: "rmt@rivera", pabx: "https://172.17.54.3" },
            "RUBIS": { domain: "rubis.mg.loomy.srv.br", passwordPrefix: "rmt@loomy123#", pabx: "https://172.17.10.3" },
            "SAN FELIPPO": { domain: "sanfelippo.sp.loomy.srv.br", passwordPrefix: "rmt@loomy2023#", pabx: "https://172.17.30.3" },
            "SÃO FRANCISCO": { domain: "saofrancisco.mg.loomy.srv.br", passwordPrefix: "rmt@loomy2023#", pabx: "https://172.17.37.3" },
            "SERRA DOS PINHAIS": { domain: "serradospinhais.mg.loomy.srv.br", passwordPrefix: "Loomy@", pabx: "https://172.17.20.3" },
            "SOLAR DA COLINA": { passwordPrefix: "rmt@solardacolina", pabx: "https://192.168.13.3" }, // Domínio não fornecido
            "SOLAR DO VALE": { passwordPrefix: "rmt@loomy#2023", pabx: "https://192.168.10.3" }, // Domínio não fornecido
            "SOLAR DOS MONTES": { domain: "solardosmontes.mg.loomy.srv.br", passwordPrefix: "rmt@loomy#2023", pabx: "https://172.17.33.3" },
            "SOL DO ENGENHO": { domain: "soldoengenho.rj.loomy.srv.br", passwordPrefix: "rmt@engenho", pabx: "https://172.17.27.3" },
            "SPAZIO SALVADOR NORTE": { domain: "spaziosalvadornorte.ba.loomy.srv.br", passwordPrefix: "rmt@spaziosalvador", pabx: "https://172.17.50.3" },
            "SPAZIO SINGULAR": { domain: "spaziosingular.ba.loomy.srv.br", passwordPrefix: "rmt@loomy123#", pabx: "https://172.17.14.3" },
            "VIC PARK MONTREAL": { domain: "vicpark.mg.loomy.srv.br", passwordPrefix: "rmt@vic", pabx: "https://172.17.47.3" },
            "VILA DIAMANTE": { domain: "viladiamante.es.loomy.srv.br", passwordPrefix: "rmt@loomy#26!", pabx: "https://172.17.16.3" },
            "VILA REAL ESMERALDA": { domain: "vilarealesmeralda.mg.loomy.srv.br", passwordPrefix: "rmt@vilareal", pabx: "https://172.17.56.3" },
            "VILLAGE EUROPA": { domain: "villageeuropa.mg.loomy.srv.br", passwordPrefix: "rmt@villageeuropa", pabx: "https://172.17.8.3/" },
            "VILLAS VILLAGE": { domain: "villasvillage.ba.loomy.srv.br", passwordPrefix: "rmt@villasvillage", pabx: "https://172.17.21.3" },
            "VIVER FAMA": { domain: "viverfama.go.loomy.srv.br", passwordPrefix: "rmt@viverfama", pabx: "https://172.17.64.3" },
            "XINGÚ": { domain: "residencialxingu.mg.loomy.srv.br", passwordPrefix: "rmt@xingu", pabx: "https://172.17.57.3" }
        };

        // Condomínios cuja senha é apenas o prefixo
        const specialPasswordCondos = [
            "SAN FELIPPO", "SÃO FRANCISCO", "RESIDENCIAL SABIÁ", "JARDIM TIRADENTES",
            "LAGOA DAS ESMERALDAS", "SOLAR DOS MONTES", "LIBRA", "MORADA CARIOCA", "RUBIS",
            "MATA ATLÂNTICA", "COSTA DO CACAU", "SPAZIO SINGULAR", "BOSQUE DAS MARGARIDAS",
            "GRANCLUB", "GRAN VALEY", "JOINVILLE", "MUSIQUE", "MARAJÓ", "MORADA DAS TORRES SP",
            "PONTO GARDÊNIA", "SOLAR DO VALE", "PLAZA NORTE", "ESTRELA DE CRISTAL", "VILA DIAMANTE",
            "GOLDEN PLAZA"
        ];

        // --- INICIALIZAÇÃO ---
        window.addEventListener('DOMContentLoaded', () => {
            const select = document.getElementById('condominio');
            const condoNames = Object.keys(condominiumData).sort();
            condoNames.forEach(name => {
                const option = document.createElement('option');
                option.value = name;
                option.textContent = name;
                select.appendChild(option);
            });
            feather.replace(); // Inicializa os ícones

            // Adiciona o listener para o select do condomínio
            select.addEventListener('change', togglePabxLink);
        });
        
        // --- FUNÇÃO PARA CONTROLAR VISIBILIDADE DO ATALHO PABX ---
        function togglePabxLink() {
            const condominioSelect = document.getElementById('condominio');
            const selectedCondoName = condominioSelect.value;
            const pabxSection = document.getElementById('pabxSection');
            const pabxLink = document.getElementById('pabxLink');

            if (selectedCondoName && condominiumData[selectedCondoName] && condominiumData[selectedCondoName].pabx) {
                const condominioInfo = condominiumData[selectedCondoName];
                pabxLink.href = condominioInfo.pabx;
                pabxSection.classList.remove('hidden');
            } else {
                pabxSection.classList.add('hidden');
            }
            feather.replace();
        }

        // --- FUNÇÕES DE MENSAGEM ---
        function showMessage(message, type = 'success') {
            const messageBox = document.getElementById('messageBox');
            messageBox.textContent = message;
            if (type === 'success') {
                messageBox.className = 'mt-4 p-3 bg-green-100 text-green-800 border border-green-200 rounded-md text-sm text-center';
            } else {
                messageBox.className = 'mt-4 p-3 bg-red-100 text-red-800 border border-red-200 rounded-md text-sm text-center';
            }
            messageBox.classList.remove('hidden');
            setTimeout(() => messageBox.classList.add('hidden'), 3000);
        }

        // --- LÓGICA DE GERAÇÃO E EXIBIÇÃO ---
        document.getElementById('gerarDadosBtn').addEventListener('click', () => {
            const bloco = document.getElementById('bloco').value.trim();
            const apartamento = document.getElementById('apartamento').value.trim();
            const condominio = document.getElementById('condominio').value;
            const ponto = document.querySelector('input[name="ponto"]:checked').value;

            if (!condominio || !bloco || !apartamento) {
                showMessage("Por favor, preencha todos os campos.", 'error');
                document.getElementById('outputSection').classList.add('hidden');
                document.getElementById('instructionsSection').classList.add('hidden');
                return;
            }
            
            document.getElementById('messageBox').classList.add('hidden');
            const condominioInfo = condominiumData[condominio];

            // Geração dos dados
            const usuario = `${bloco}${apartamento}${ponto}`;
            let senha;
            if (specialPasswordCondos.includes(condominio)) {
                senha = condominioInfo.passwordPrefix;
            } else if (condominioInfo.specialPassword) {
                senha = `${condominioInfo.passwordPrefix}${bloco}${apartamento}0${ponto}`;
            } else {
                senha = `${condominioInfo.passwordPrefix}${bloco}${apartamento}${ponto}`;
            }
            const dominio = condominioInfo.domain || "Não disponível";

            // Exibição dos dados gerados nos inputs
            document.getElementById('usuarioOutput').value = usuario;
            document.getElementById('senhaOutput').value = senha;
            document.getElementById('dominioOutput').value = dominio;
            document.getElementById('outputSection').classList.remove('hidden');

            // Geração e exibição do texto de instruções
            const portaria = 94;
            const interfoneFisico = `${bloco}${apartamento}`;
            const interfoneInteligente = usuario;

            const instructionsText = `USUÁRIO: ${usuario}\nSENHA: ${senha}\nDOMÍNIO: ${dominio}\n\nSIGA O PASSO A PASSO DO VÍDEO COM ATENÇÃO! ⚠\nhttps://www.youtube.com/watch?v=lZxGqBq7S5U\n\nBaixe o aplicativo.\n\nLINK INTERFONE INTELIGENTE - ANDROID:\nhttps://play.google.com/store/apps/details?id=com.voipgroup.loomyinterfone&hl=pt_BR\n\nLINK INTERFONE INTELIGENTE - IPHONE:\nhttps://apps.apple.com/br/app/loomy-interfone-inteligente/id1633125172\n\nComo usar?\nPara ligar para a portaria, digite: ${portaria}\nPara ligar para o seu interfone físico, digite: ${interfoneFisico}\nPara ligar no seu interfone inteligente, digite: ${interfoneInteligente}`;

            document.getElementById('instructionsOutput').textContent = instructionsText;
            document.getElementById('instructionsSection').classList.remove('hidden');
            feather.replace();
        });

        // --- FUNÇÕES DE COPIAR ---
        function copyToClipboard(text, successMessage) {
            navigator.clipboard.writeText(text).then(() => {
                showMessage(successMessage, 'success');
            }).catch(err => {
                console.error('Falha ao copiar: ', err);
                showMessage("Falha ao copiar. Tente manualmente.", 'error');
            });
        }

        document.querySelectorAll('.copy-btn').forEach(button => {
            button.addEventListener('click', (event) => {
                const targetId = event.currentTarget.dataset.target;
                const targetInput = document.getElementById(targetId);
                copyToClipboard(targetInput.value, `${targetInput.previousElementSibling.textContent} copiado!`);
            });
        });

        document.getElementById('copyInstructionsBtn').addEventListener('click', () => {
            const instructionsText = document.getElementById('instructionsOutput').textContent;
            copyToClipboard(instructionsText, 'Instruções copiadas para a área de transferência!');
        });
    </script>
</body>
</html>
